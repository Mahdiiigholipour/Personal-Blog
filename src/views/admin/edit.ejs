<!-- views/admin/edit.ejs -->

<%- include("../partials/header", { pageTitle: "Edit Article" }) %>

<h1>Edit Article</h1>

<% const isoDate = new Date(article.publishingDate) .toISOString()
.split("T")[0]; %>

<form
  action="/admin/edit/<%= article.publishingDate %>"
  method="POST"
  class="compact-form"
>
  <div class="form-group">
    <label for="title">Title</label>
    <input
      id="title"
      type="text"
      name="title"
      value="<%= article.title %>"
      required
    />
  </div>

  <div class="form-group">
    <label for="content">Content</label>
    <textarea id="content" name="content" rows="6" required>
<%= article.content %></textarea
    >
  </div>

  <div class="form-group">
    <label for="publishingDate">Publishing Date</label>
    <input
      id="publishingDate"
      type="date"
      name="publishingDate"
      value="<%= isoDate %>"
      required
    />
  </div>

  <div style="display: flex; gap: 10px; align-items: center">
    <button type="submit" class="btn btn-edit">Save Changes</button>

    <form
      action="/admin/delete/<%= article.publishingDate %>"
      method="POST"
      style="display: inline"
    >
      <button type="submit" class="btn btn-delete">Delete Article</button>
    </form>
  </div>
</form>

<p style="margin-top: 20px">
  <a href="/admin/dashboard" class="btn btn-edit"> Back to Dashboard </a>
</p>

<%- include("../partials/footer") %>
