<!-- views/admin/edit.ejs -->

<%- include("../partials/header", { pageTitle: "Edit Article" }) %>

<h1>Edit Article</h1>

<% const isoDate = new Date(+article.publishingDate).toISOString()
.split("T")[0]; %>

<form
  action="/admin/edit/<%= +article.id %>"
  method="POST"
  class="compact-form"
>
  <div class="form-group">
    <label for="title">Title</label>
    <input
      id="title"
      type="text"
      name="title"
      value="<%= article.title %>"
      required
    />
  </div>

  <div class="form-group">
    <label for="content">Content</label>
    <textarea id="content" name="content" rows="6" required>
<%= article.content %></textarea
    >
  </div>

  <div class="form-group">
    <label for="date">Publishing Date</label>
    <input id="date" type="date" required value="<%= isoDate %>" />
  </div>

  <input type="hidden" name="publishingDate" id="publishingDate" />

  <div style="display: flex; gap: 10px; align-items: center">
    <button type="submit" class="btn btn-edit">Save Changes</button>
  </div>
</form>

<script src="/js/handleDate.js"></script>

<p style="margin-top: 20px">
  <a href="/admin/dashboard" class="btn btn-edit"> Back to Dashboard </a>
</p>

<%- include("../partials/footer") %>
